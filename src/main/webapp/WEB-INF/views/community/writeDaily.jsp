<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>


<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>너와함개</title>

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" id="montserrat-css"
	href="https://fonts.googleapis.com/css?family=Montserrat:300,300i,400,400i,500,500i,600,600i,700,700i,800,800i">
<link rel="stylesheet" id="open-sans-css"
	href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i">

<link rel="stylesheet" id="animate-css"
	href="/css/animate.min.css?ver=3.7.2" type="text/css" media="all">
<link rel="stylesheet" id="font-awesome-css"
	href="/css/font-awesome.min.css?ver=5.15.4" type="text/css" media="all">
<link rel="stylesheet" id="bootstrap-css"
	href="/css/bootstrap.min.css?ver=4.6.0" type="text/css" media="all">
<link rel="stylesheet" id="smartmenus-bootstrap-css"
	href="/css/smartmenus-bootstrap.min.css?ver=1.1.1" type="text/css"
	media="all">
<link rel="stylesheet" id="swiper-css"
	href="/css/swiper.min.css?ver=4.5.3" type="text/css" media="all">
<link rel="stylesheet" id="magnific-popup-css"
	href="/css/magnific-popup.min.css?ver=1.1.0" type="text/css"
	media="all">
<link rel="stylesheet" id="lana-pet-icon-css"
	href="/css/lana-pet-icon.min.css?ver=1.0.0" type="text/css" media="all">
<link rel="stylesheet" id="lana-pet-theme-css"
	href="/css/lana-pet-theme.min.css?ver=1.0.0" type="text/css"
	media="all">
<link rel="stylesheet" id="lana-pet-print-css"
	href="/css/lana-pet-print.min.css?ver=1.0.0" type="text/css"
	media="print">

<!-- ---------------------------- 위트에서 따옴 --------------------------------------- -->
<meta name="viewport"
	content="width=device-width, user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1" />
<!-- viewport-fit=cover -->
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />

<!-- 페이스북 태그 추가 20220105 JHJ-->
<meta name="facebook-domain-verification"
	content="hndmhxj5x6cet5vhwdb27myk1g5zzg" />

<!-- 구글 검색관련 보유 인증태그 20200611 #jsh -->
<!-- <meta name="naver-site-verification" content="45fff12346254a119d5ab98dbefdbba6062ffa8d" /> -->
<meta name="google-site-verification"
	content="QiNuiqgUJ8C1vIYRSjc8bTmFlxPIPeo8sMdAScIfFr4" />

<!-- 네이버 검색관련 보유 인증태그 20210422 HUBDNC_JHM -->
<meta name="naver-site-verification"
	content="b44f9f3908832c8466c3222c55c779e459afd84f" />
<meta name="naver-site-verification"
	content="e7d78a61775134bcf5143b18aa9257d1eb118272" />

<!-- 검색관련 태그 추가 20200611 #jsh -->
<meta name="Robots" content="index,follow" />
<meta name="title" content="위트" />
<meta name="author" content="위트" />
<meta name="description" content="위트있는 반려동물의 일상이야기" />
<meta name="keywords"
	content="위트,위트코리아,반려동물,커뮤니티,반려동물용품,댕댕이,냥냥이,멍멍이,강아지,고양이,냥이,집사,SNS,댕냥" />

<!-- CSRF Token -->
<meta name="csrf-token"
	content="fMPSQgYIY4OkEdKqIksxvzPHnfeXqXy7cXzLZJH7">
<!-- SNS관련 태그 추가 20200611 #jsh -->
<meta property="og:url" content="https://witkorea.kr/" />
<meta property="og:site_name" content="위트" />
<meta property="og:title" content="위트(wit)" />
<meta property="og:description" content="위트있는 반려동물의 일상이야기" />
<meta property="og:type" content="website" />
<meta property="og:image"
	content="https://www.witkorea.kr/web/img/open_graph_icon_2_800.png" />


<script type="text/javascript"
	src=https://www.witkorea.kr/lib/jquery/dist/jquery.min.js?20200418></script>
<script type="text/javascript"
	src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script type="text/javascript"
	src="https://code.jquery.com/jquery-migrate-1.2.1.js"></script>

<!-- Styles -->
<link rel="stylesheet"
	href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<link rel="stylesheet" type="text/css"
	href="https://www.witkorea.kr/web/plugin/vendor.min.css?20200811">
<link rel="stylesheet" type="text/css"
	href="https://www.witkorea.kr/web/css/reset.css?20200811">
<link rel="stylesheet" type="text/css"
	href="https://www.witkorea.kr/web/css/common.css?ver=1652864783">
<link rel="stylesheet" type="text/css"
	href="https://www.witkorea.kr/web/css/style.css?ver=1652864783">
<link rel="stylesheet" type="text/css"
	href="https://www.witkorea.kr/web/css/style2.css?ver=1652864783">
<!-- Scripts -->
<script type="text/javascript"
	src=https://www.witkorea.kr/web/plugin/vendor.min.js?20200811></script>
<script type="text/javascript"
	src=https://www.witkorea.kr/web/js/common.js?20200811></script>
<style>
header .mainHeader .headerInner .link_ul li {
	line-height: 80px;
}

header .mainHeader .headerInner .link_ul li:first-child {
	margin: 0;
}

header .mainHeader .headerInner .link_ul li {
	padding: 0 22.5px;
}

header .subHeader .headerInner .gnb-bar .gnb-list.hover_menu {
	display: none;
}

header .subHeader .headerInner .gnb-bar .gnb-list.hover_menu.on {
	display: flex;
}
</style>

<style type="text/css">
#post-1 {
	margin-top: 10%;
	margin-bottom: 10%;
}

#writeDaily-imgupload {
	margin-top: 20px;
	background: #f8b03a;
	border: #f8b03a;
	color: white;
	height: 33px;
	width: 120px;
	border-radius: 4px;
	font-weight: bold;
	text-align: center;
}

#wrtieDaily-cancle {
	margin-right: 20px;
	background: #b7b7b7;
	border: #b7b7b7;
	color: white;
	height: 40px;
	width: 191px;
	border-radius: 4px;
	font-weight: bold;
	padding: 8px;
	padding-left: 80px;
	padding-right: 80px;
}

#writeDaily-btn {
	background: #f8b03a;
	border: #f8b03a;
	color: white;
	height: 40px;
	width: 191px;
	border-radius: 4px;
	font-weight: bold;
}

#updateDaily-btn {
	background: #f8b03a;
	border: #f8b03a;
	color: white;
	height: 40px;
	width: 191px;
	border-radius: 4px;
	font-weight: bold;
}

#btn-group {
	margin-top: 30px;
}

/* -------------- 이미지 미리보기 -------------- */
#att_zone {
	width: 100%;
	min-height: 150px;
	padding: 10px;
	border: 1px;
	background: #fafafa;
	border-radius: 10px;
}

#att_zone:empty:before {
	content: attr(data-placeholder);
	color: #999;
	font-size: .9em;
}
</style>


</head>

<%@include file="../include/Header.jsp"%>

<body class="page page-template-default">



	<main class="main">
		<div id="post-1" class="page type-page post-1">
			<div class="container post-container bg-white">

				<div class="row justify-content-start post-row no-gutters">
					<div
						class="col-12 px-0 px-sm-3 col-md-10 offset-md-1 px-md-0 col-xl-9">
						<div class="post-content">
							<h3 class="font-weight-bold">일상공유</h3>

							<form id="contactform" class="contact-form mt-5"
								action="writeDaily" method="post" enctype="multipart/form-data">
								<input type="hidden" value="${sessionScope.userEmail }" name="userEmail"/>
								<!-- 이미지 미리보기 -->
								<div id='image_preview'>
									<h4>미리보기</h4>
									<input type='file' id='btnAtt' multiple='multiple' name="file" />
									
									<div id='att_zone'
										data-placeholder='파일을 첨부 하려면 파일 선택 버튼을 클릭하거나 파일을 드래그앤드롭 하세요.'></div>
								</div>
								<br />
								

								<div class="form-group row">
									<div class="col">
										<label class="font-weight-bold">글작성<span
											style="color: red">*</span></label>
										<div class="form-group row">
											<div class="col">
												<input type="text" class="form-control" name="communityTitle"
													placeholder="제목을 입력해주세요." aria-required="true"
													required="required">
											</div>
										</div>
										<textarea class="form-control" name="communityContent"
											rows="8" aria-required="true" aria-label="Message"
											placeholder="내용을 입력해주세요."></textarea>
									</div>
								</div>
								<div class="row text-center">
									<div class="col" id="btn-group">
										<a href="daily" id="wrtieDaily-cancle">취소</a>							
										<button id="writeDaily-btn" type="submit">등록</button>										
									</div>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>

	</main>


	<%@include file="../include/Footer.jsp"%>

	<script type="text/javascript" src="../js/jquery.min.js?ver=3.6.0"></script>
	<script type="text/javascript" src="../js/popper.min.js?ver=1.16.1"></script>
	<script type="text/javascript" src="../js/bootstrap.min.js?ver=4.6.0"></script>
	<script type="text/javascript" src="../js/smartmenus.min.js?ver=1.1.1"></script>
	<script type="text/javascript"
		src="../js/smartmenus-bootstrap.min.js?ver=1.1.1"></script>
	<script type="text/javascript" src="../js/swiper.min.js?ver=4.5.3"></script>
	<script type="text/javascript" src="../js/scrollmagic.min.js?ver=2.0.8"></script>
	<script type="text/javascript"
		src="../js/magnific-popup.min.js?ver=1.1.0"></script>
	<script type="text/javascript" src="../js/custom-theme.js?ver=1.0.0"></script>
	<script type="text/javascript">
	/* 	$(document).ready(function(){
			$("#writeDaily-imgupload").click(function(e){
				e.preventDefault();
				$("#file").click();
			});
		});
		$('body').click(function(){
			$(".ui-sortable").append('<li data-type="image" data-ori_preview="file0" data-preview="news0" data-thumb_crob="1" data-crob="crob_img1">' +	 
					'<div class="click-item thumb_btn">' +	 
							'<input type="radio" name="crob_thumb_img" id="crob_img1"></div>' +	 
						'<img class="write-crob-thumb" id="crob_main_thumb1" src="C:\Users\wlsgm\OneDrive\바탕 화면\도루묵.jpg">' +	 
					'<div class="tag-item" hidden=""></div>	' +	 										
						'<button type="button" class="util_btn del_util" onclick="pageSnsWrite.deleteImage("file0",0)"></button></li>')
		}) */
		 
		
		( /* att_zone : 이미지들이 들어갈 위치 id, btn : file tag id */
				  imageView = function imageView(att_zone, btn){

				    var attZone = document.getElementById(att_zone);
				    var btnAtt = document.getElementById(btn)
				    var sel_files = [];
				    
				    // 이미지와 체크 박스를 감싸고 있는 div 속성
				    var div_style = 'display:inline-block;position:relative;'
				                  + 'width:150px;height:120px;margin:5px;z-index:1';
				    // 미리보기 이미지 속성
				    var img_style = 'width:100%;height:100%;z-index:none';
				    // 이미지안에 표시되는 체크박스의 속성
				    var chk_style = 'width:30px;height:30px;position:absolute;font-size:24px;'
				                  + 'right:0px;bottom:0px;z-index:999;background-color:rgba(255,255,255,0.1);color:#f00';
				  
				    btnAtt.onchange = function(e){
				      var files = e.target.files;
				      var fileArr = Array.prototype.slice.call(files)
				      for(f of fileArr){
				        imageLoader(f);
				      }
				    }  
				    
				  
				    // 탐색기에서 드래그앤 드롭 사용
				    attZone.addEventListener('dragenter', function(e){
				      e.preventDefault();
				      e.stopPropagation();
				    }, false)
				    
				    attZone.addEventListener('dragover', function(e){
				      e.preventDefault();
				      e.stopPropagation();
				      
				    }, false)
				  
				    attZone.addEventListener('drop', function(e){
				      var files = {};
				      e.preventDefault();
				      e.stopPropagation();
				      var dt = e.dataTransfer;
				      files = dt.files;
				      for(f of files){
				        imageLoader(f);
				      }
				      
				    }, false)
				    

				    
				    /*첨부된 이미리즐을 배열에 넣고 미리보기 */
				    imageLoader = function(file){
				      sel_files.push(file);
				      var reader = new FileReader();
				      reader.onload = function(ee){
				        let img = document.createElement('img')
				        img.setAttribute('style', img_style)
				        img.src = ee.target.result;
				        attZone.appendChild(makeDiv(img, file));
				      }
				      
				      reader.readAsDataURL(file);
				    }
				    
				    /*첨부된 파일이 있는 경우 checkbox와 함께 attZone에 추가할 div를 만들어 반환 */
				    makeDiv = function(img, file){
				      var div = document.createElement('div')
				      div.setAttribute('style', div_style)
				      
				      var btn = document.createElement('input')
				      btn.setAttribute('type', 'button')
				      btn.setAttribute('value', 'x')
				      btn.setAttribute('delFile', file.name);
				      btn.setAttribute('style', chk_style);
				      btn.onclick = function(ev){
				        var ele = ev.srcElement;
				        var delFile = ele.getAttribute('delFile');
				        for(var i=0 ;i<sel_files.length; i++){
				          if(delFile== sel_files[i].name){
				            sel_files.splice(i, 1);      
				          }
				        }
				        
				        dt = new DataTransfer();
				        for(f in sel_files) {
				          var file = sel_files[f];
				          dt.items.add(file);
				        }
				        btnAtt.files = dt.files;
				        var p = ele.parentNode;
				        attZone.removeChild(p)
				      }
				      div.appendChild(img)
				      div.appendChild(btn)
				      return div
				    }
				  }
				)('att_zone', 'btnAtt')
				
				
				
				/* 이미지 다중 업로드 */
		 
	</script>

</body>
</html>