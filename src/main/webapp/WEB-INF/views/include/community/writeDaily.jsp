<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>너와함개</title>

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" id="montserrat-css"
	href="https://fonts.googleapis.com/css?family=Montserrat:300,300i,400,400i,500,500i,600,600i,700,700i,800,800i">
<link rel="stylesheet" id="open-sans-css"
	href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i">

<link rel="stylesheet" id="animate-css"
	href="/css/animate.min.css?ver=3.7.2" type="text/css" media="all">
<link rel="stylesheet" id="font-awesome-css"
	href="/css/font-awesome.min.css?ver=5.15.4" type="text/css" media="all">
<link rel="stylesheet" id="bootstrap-css"
	href="/css/bootstrap.min.css?ver=4.6.0" type="text/css" media="all">
<link rel="stylesheet" id="smartmenus-bootstrap-css"
	href="/css/smartmenus-bootstrap.min.css?ver=1.1.1" type="text/css"
	media="all">
<link rel="stylesheet" id="swiper-css"
	href="/css/swiper.min.css?ver=4.5.3" type="text/css" media="all">
<link rel="stylesheet" id="magnific-popup-css"
	href="/css/magnific-popup.min.css?ver=1.1.0" type="text/css"
	media="all">
<link rel="stylesheet" id="lana-pet-icon-css"
	href="/css/lana-pet-icon.min.css?ver=1.0.0" type="text/css" media="all">
<link rel="stylesheet" id="lana-pet-theme-css"
	href="/css/lana-pet-theme.min.css?ver=1.0.0" type="text/css"
	media="all">
<link rel="stylesheet" id="lana-pet-print-css"
	href="/css/lana-pet-print.min.css?ver=1.0.0" type="text/css"
	media="print">
	
	<!-- ---------------------------- 위트에서 따옴 --------------------------------------- -->
	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1" /> <!-- viewport-fit=cover -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge"/>

    <!-- 페이스북 태그 추가 20220105 JHJ-->
    <meta name="facebook-domain-verification" content="hndmhxj5x6cet5vhwdb27myk1g5zzg" />
    
    <!-- 구글 검색관련 보유 인증태그 20200611 #jsh -->
    <!-- <meta name="naver-site-verification" content="45fff12346254a119d5ab98dbefdbba6062ffa8d" /> -->
    <meta name="google-site-verification" content="QiNuiqgUJ8C1vIYRSjc8bTmFlxPIPeo8sMdAScIfFr4" />
	
	<!-- 네이버 검색관련 보유 인증태그 20210422 HUBDNC_JHM -->
	<meta name="naver-site-verification" content="b44f9f3908832c8466c3222c55c779e459afd84f" />
	<meta name="naver-site-verification" content="e7d78a61775134bcf5143b18aa9257d1eb118272" />

    <!-- 검색관련 태그 추가 20200611 #jsh -->
    <meta name="Robots" content="index,follow" />
    <meta name="title" content="위트" />
    <meta name="author" content="위트" />
    <meta name="description" content="위트있는 반려동물의 일상이야기" />
    <meta name="keywords" content="위트,위트코리아,반려동물,커뮤니티,반려동물용품,댕댕이,냥냥이,멍멍이,강아지,고양이,냥이,집사,SNS,댕냥" />

    <!-- CSRF Token -->
    <meta name="csrf-token" content="fMPSQgYIY4OkEdKqIksxvzPHnfeXqXy7cXzLZJH7">
            <!-- SNS관련 태그 추가 20200611 #jsh -->
        <meta property="og:url" content="https://witkorea.kr/" />
        <meta property="og:site_name" content="위트" />
        <meta property="og:title" content="위트(wit)" />
        <meta property="og:description" content="위트있는 반려동물의 일상이야기" />
        <meta property="og:type" content="website" />
        <meta property="og:image" content="https://www.witkorea.kr/web/img/open_graph_icon_2_800.png" />
    
    
    <script type="text/javascript" src=https://www.witkorea.kr/lib/jquery/dist/jquery.min.js?20200418></script>
    <script type="text/javascript" src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script type="text/javascript" src="https://code.jquery.com/jquery-migrate-1.2.1.js"></script>

            <!-- Styles -->
        <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
        <link rel="stylesheet" type="text/css" href="https://www.witkorea.kr/web/plugin/vendor.min.css?20200811">
        <link rel="stylesheet" type="text/css" href="https://www.witkorea.kr/web/css/reset.css?20200811">
        <link rel="stylesheet" type="text/css" href="https://www.witkorea.kr/web/css/common.css?ver=1652864783">
        <link rel="stylesheet" type="text/css" href="https://www.witkorea.kr/web/css/style.css?ver=1652864783">
		<link rel="stylesheet" type="text/css" href="https://www.witkorea.kr/web/css/style2.css?ver=1652864783">
        <!-- Scripts -->
        <script type="text/javascript" src=https://www.witkorea.kr/web/plugin/vendor.min.js?20200811></script>
		<script type="text/javascript" src=https://www.witkorea.kr/web/js/common.js?20200811></script>
<style>
	header .mainHeader .headerInner .link_ul li {line-height:80px;}
	header .mainHeader .headerInner .link_ul li:first-child {margin:0;}
	header .mainHeader .headerInner .link_ul li {padding:0 22.5px;}
	header .subHeader .headerInner .gnb-bar .gnb-list.hover_menu {display:none;}
	header .subHeader .headerInner .gnb-bar .gnb-list.hover_menu.on {display:flex;}
</style>

<style type="text/css">
#post-1 {
	margin-top: 70px;
	margin-bottom: 70px;
}

#writeDaily-imgupload {
	margin-top: 20px;
	background: #f8b03a;
	border: #f8b03a;
	color: white;
	height: 33px;
	width: 120px;
	border-radius: 4px;
	font-weight: bold;
	text-align: center;
}

#wrtieDaily-cancle {
	margin-right: 20px;
	background: #b7b7b7;
	border: #b7b7b7;
	color: white;
	height: 40px;
	width: 191px;
	border-radius: 4px;
	font-weight: bold;
}

#writeDaily-btn {
	background: #f8b03a;
	border: #f8b03a;
	color: white;
	height: 40px;
	width: 191px;
	border-radius: 4px;
	font-weight: bold;
}

#btn-group {
	margin-top: 30px;
}
</style>


</head>

<%@include file="../Header.jsp"%>

<body class="page page-template-default">



	<main class="main">
		<div id="post-1" class="page type-page post-1">
			<div class="container post-container bg-white">
				<div class="row justify-content-start post-row no-gutters">
					<div
						class="col-12 px-0 px-sm-3 col-md-10 offset-md-1 px-md-0 col-xl-9">
						<div class="post-content">
							<h3 class="font-weight-bold">일상공유</h3>

							<form id="contactform" class="contact-form mt-5" action="dailyDetail" enctype="multipart/form-data">

							<!-- 	<div class="form-group row">
									<div class="col">
										<label for="input-file" class="font-weight-bold">사진등록<span
											style="color: red">*</span></label>
											<input multiple="multiple" type="file" name="files" id="input-file" class="form-control" aria-required="true"
											aria-label="Subject">
											
										첨부한 이미지 목록 출력	
										<div>
										<div class="imgs_wrap">
											<img id="writeDetail-img" alt="" src="">
											<ul class="write-crob-img-wrapper clearfix ui-sortable">
												썸네일 정보
												<li data-type="image" data-ori_preview="file0"
													data-preview="news0" data-thumb_crob="1"
													data-crob="crob_img1"><div
														class="click-item thumb_btn">
														<input type="radio" name="crob_thumb_img" id="crob_img1"><label
															class="write-crob-radio" for="crob_img1"
															style="background: url(&quot;/web/img/change_icon_chi.png&quot;) center center no-repeat;">1</label>
													</div>
													<img class="write-crob-thumb" id="crob_main_thumb1"
													src="blob:https://www.witkorea.kr/8e6b7a5a-2e66-4637-a59b-b3cd00fa3cd0">
												<div class="tag-item" hidden=""></div>												
													<button type="button" class="util_btn del_util"
														onclick="pageSnsWrite.deleteImage('file0',0)"></button></li>
											
											</ul>
										</div>
										</div>

										<a href="javascript:" id="writeDaily-imgupload" onclick="fileUploadAction();" style="float: right">사진첨부</a>
										<input type="file" id="file" style="display: none;" multiple />
									</div>

								</div> -->
								
								<div>
        <h2><b>이미지 미리보기</b></h2>
        <div class="input_wrap">
            <a href="javascript:" onclick="fileUploadAction();" class="my_button">파일 업로드</a>
            <input type="file" id="input_imgs" multiple/>
        </div>
    </div>
 
    <div>
        <div class="imgs_wrap">
            <img id="img" />
        </div>
    </div>
 
    <a href="javascript:" class="my_button" onclick="submitAction();">업로드</a>
    
    
								<div class="form-group row">
									<div class="col">
										<label class="font-weight-bold">글작성<span
											style="color: red">*</span></label>
										<textarea class="form-control" name="message" rows="8"
											"
                                              aria-required="true"
											aria-label="Message"></textarea>
									</div>
								</div>
								<div class="row text-center">
									<div class="col" id="btn-group">
										<button id="wrtieDaily-cancle" type="submit"">취소</button>
										<button id="writeDaily-btn" onclick="submitAction();" type="submit"">등록</button>
									</div>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
	</main>


	<%@include file="../Footer.jsp"%>

	<script type="text/javascript" src="../js/jquery.min.js?ver=3.6.0"></script>
	<script type="text/javascript" src="../js/popper.min.js?ver=1.16.1"></script>
	<script type="text/javascript" src="../js/bootstrap.min.js?ver=4.6.0"></script>
	<script type="text/javascript" src="../js/smartmenus.min.js?ver=1.1.1"></script>
	<script type="text/javascript"
		src="../js/smartmenus-bootstrap.min.js?ver=1.1.1"></script>
	<script type="text/javascript" src="../js/swiper.min.js?ver=4.5.3"></script>
	<script type="text/javascript" src="../js/scrollmagic.min.js?ver=2.0.8"></script>
	<script type="text/javascript"
		src="../js/magnific-popup.min.js?ver=1.1.0"></script>
	<script type="text/javascript" src="../js/custom-theme.js?ver=1.0.0"></script>
	<script type="text/javascript">
	/* 	$(document).ready(function(){
			$("#writeDaily-imgupload").click(function(e){
				e.preventDefault();
				$("#file").click();
			});
		});
		$('body').click(function(){
			$(".ui-sortable").append('<li data-type="image" data-ori_preview="file0" data-preview="news0" data-thumb_crob="1" data-crob="crob_img1">' +	 
					'<div class="click-item thumb_btn">' +	 
							'<input type="radio" name="crob_thumb_img" id="crob_img1"></div>' +	 
						'<img class="write-crob-thumb" id="crob_main_thumb1" src="C:\Users\wlsgm\OneDrive\바탕 화면\도루묵.jpg">' +	 
					'<div class="tag-item" hidden=""></div>	' +	 										
						'<button type="button" class="util_btn del_util" onclick="pageSnsWrite.deleteImage("file0",0)"></button></li>')
		}) */
		 
		
		// 이미지 정보들을 담을 배열
        var sel_files = [];
 
 
        $(document).ready(function() {
            $("#input_imgs").on("change", handleImgFileSelect);
        }); 
 
        function fileUploadAction() {
            console.log("fileUploadAction");
            $("#input_imgs").trigger('click');
        }
 
        function handleImgFileSelect(e) {
 
            // 이미지 정보들을 초기화
            sel_files = [];
            $(".imgs_wrap").empty();
 
            var files = e.target.files;
            var filesArr = Array.prototype.slice.call(files);
 
            var index = 0;
            filesArr.forEach(function(f) {
                if(!f.type.match("image.*")) {
                    alert("확장자는 이미지 확장자만 가능합니다.");
                    return;
                }
 
                sel_files.push(f);
 
                var reader = new FileReader();
                reader.onload = function(e) {
                    var html = "CONTENT";
                    var html = "<a href=\"javascript:void(0);\" onclick=\"deleteImageAction("+index+")\" id=\"img_id_"+index+"\"><img src=\"" + e.target.result + "\" data-file='"+f.name+"' class='selProductFile' title='Click to remove'></a>";

                    $(".imgs_wrap").append(html);
                    index++;
 
                }
                reader.readAsDataURL(f);
                
            });
        }
        
        
        function deleteImageAction(index) {            
                 console.log("index : "+index);
                 sel_files.splice(index, 1);
      
                 var img_id = "#img_id_"+index;
                 $(img_id).remove();
      
                 console.log(sel_files);
             }    
        function submitAction() {            
            var data = new FormData();
 
            for(var i=0, len=sel_files.length; i<len; i++) {
                var name = "image_"+i;
                data.append(name, sel_files[i]);
            }
            data.append("image_count", sel_files.length);
           
 
            var xhr = new XMLHttpRequest();
            xhr.open("POST","./study01_af.php");
            xhr.onload = function(e) {
                if(this.status == 200) {
                    console.log("Result : "+e.currentTarget.responseText);
                }
            }
 
            xhr.send(data);
 
        }

		 
		 
	</script>

</body>
</html>